# Deep Linear Networks - Environment Configuration
# Copy this file to .env and modify as needed

# ==============================================================================
# MPS (Metal Performance Shaders) Configuration for macOS Apple Silicon
# ==============================================================================

# PYTORCH_MPS_HIGH_WATERMARK_RATIO controls MPS graph caching behavior
# - 0.0 = Minimal caching (recommended for deep networks to avoid disk space issues)
# - 1.0 = Aggressive caching (maximum performance, may cause "out of space" errors)
# - Default if not set: ~0.9 (PyTorch default, aggressive)
#
# Recommendation: Use 0.0 for development with deep networks (100+ layers)
PYTORCH_MPS_HIGH_WATERMARK_RATIO=0.0

# PYTORCH_ENABLE_MPS_FALLBACK controls CPU fallback for unsupported operations
# - 1 = Enable fallback to CPU for unsupported MPS ops (recommended)
# - 0 = Disable fallback, raise error on unsupported ops
PYTORCH_ENABLE_MPS_FALLBACK=1

# ==============================================================================
# Device Selection Override
# ==============================================================================

# FORCE_CPU: Set to "1" to force CPU usage instead of GPU
# Useful for debugging or when MPS issues occur
# FORCE_CPU=0

# ==============================================================================
# Logging and Debugging
# ==============================================================================

# DEEP_LINEAR_LOG_DEVICE: Log which device is being used
# - 1 = Enable device logging
# - 0 = Disable
DEEP_LINEAR_LOG_DEVICE=1

# ==============================================================================
# Common Configuration Profiles
# ==============================================================================

# Profile 1: Development (recommended for deep networks)
# PYTORCH_MPS_HIGH_WATERMARK_RATIO=0.0
# PYTORCH_ENABLE_MPS_FALLBACK=1
# DEEP_LINEAR_LOG_DEVICE=1

# Profile 2: Production (maximum performance, requires sufficient disk space)
# PYTORCH_MPS_HIGH_WATERMARK_RATIO=0.5
# PYTORCH_ENABLE_MPS_FALLBACK=1
# DEEP_LINEAR_LOG_DEVICE=0

# Profile 3: CPU-only (debugging or compatibility)
# FORCE_CPU=1
# DEEP_LINEAR_LOG_DEVICE=1
